<!DOCTYPE html>
<html lang="en">
    <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Homework 04: Cut, WC</title>

	<!-- Bootstrap core CSS -->
	<link href="static/css/blugold.css" rel="stylesheet">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

	<style>
	body {
	    padding: 10px;
	}
	</style>
    </head>
    <body>
	<div class="container">

	    <div class="row">
		<div class="page-header">
		    <ul class="nav nav-pills pull-right">
			
			<li><a href="index.html"><i class="fa fa-linux"></i> <span class="visible-md-inline visible-lg-inline">Home</span></a></li>
			
		    </ul>
		    <h1><i class="fa fa-code"></i> Homework 04: Cut, WC</h1>
		</div>
	    </div>

            
<p>The goal of this homework assignment is to allow you to practice writing
<a href="https://www.python.org/">Python</a> scripts to create simple <a href="https://en.wikipedia.org/wiki/Unix">Unix</a> filters or utilities that utilize
<a href="https://en.wikipedia.org/wiki/Data_structure">data structures</a> such as <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">lists</a> and <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">dicts</a>.</p>
<p>For this assignment, record your scripts and any responses to the following
activities in the <code>homework04</code> folder of your <strong>assignments</strong> <a href="https://github.com">GitHub</a>
repository and push your work by <strong>noon Saturday, February 24</strong>.</p>
<h2 id="activity-0-preparation">Activity 0: Preparation<a class="headerlink" href="#activity-0-preparation" title="Permanent link">&para;</a></h2>
<p>Before starting this homework assignment, you should first perform a <code>git
pull</code> to retrieve any changes in your remote <a href="https://github.com">GitHub</a> repository:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ <span style="color: #008000">cd</span> path/to/repository                   <span style="color: #3D7B7B; font-style: italic"># Go to assignments repository</span>

$ git switch master                       <span style="color: #3D7B7B; font-style: italic"># Make sure we are in master branch</span>

$ git pull --rebase                       <span style="color: #3D7B7B; font-style: italic"># Get any remote changes not present locally</span>
</code></pre></div>

<p>Next, create a new branch for this assignment:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ git checkout -b homework04              <span style="color: #3D7B7B; font-style: italic"># Create homework04 branch and check it out</span>
</code></pre></div>

<h3 id="task-1-skeleton-code">Task 1: Skeleton Code<a class="headerlink" href="#task-1-skeleton-code" title="Permanent link">&para;</a></h3>
<p>To help you get started, the instructor has provided you with the following <strong>skeleton code</strong>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Go to homework04 folder</span>
$ <span style="color: #008000">cd</span> homework04

<span style="color: #3D7B7B; font-style: italic"># Download Makefile</span>
$ curl -LO https://www3.nd.edu/~pbui/teaching/cse.20289.sp24/static/txt/homework04/Makefile

<span style="color: #3D7B7B; font-style: italic"># Download Python skeleton code</span>
$ curl -LO https://www3.nd.edu/~pbui/teaching/cse.20289.sp24/static/txt/homework04/cut.py
$ curl -LO https://www3.nd.edu/~pbui/teaching/cse.20289.sp24/static/txt/homework04/wc.py
</code></pre></div>

<p>Once downloaded, you should see the following files in your <code>homework04</code> directory:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>homework04
    <span style="color: #AA5D1F; font-weight: bold">\_</span> Makefile     <span style="color: #3D7B7B; font-style: italic"># This is the Makefile building all the assignment artifacts</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> cut.py       <span style="color: #3D7B7B; font-style: italic"># This is the Python script for the cut utility</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> wc.py        <span style="color: #3D7B7B; font-style: italic"># This is the Python script for the wc utility</span>
</code></pre></div>

<div class="alert alert-warning">
<h4 id="doctests"><i class="fa fa-warning"></i> DocTests<a class="headerlink" href="#doctests" title="Permanent link">&para;</a></h4>
<p>You may notice that in addition to the usual comments and <code>TODOs</code>, the
<a href="https://peps.python.org/pep-0257/">docstrings</a> of each method also contains a few <a href="https://docs.python.org/3/library/doctest.html">doctests</a>.</p>
<p>You are <strong>not</strong> to modify these <a href="https://docs.python.org/3/library/doctest.html">doctests</a> and must keep them in-place. They
are used to verify the correctness of your code.</p>
<p>Your code goes <strong>below</strong> the <a href="https://peps.python.org/pep-0257/">docstrings</a>, where the <code>TODO</code> and <code>pass</code>
commands are (you may remove the pass once you complete the method).</p>
</div>
<h3 id="task-2-initial-import">Task 2: Initial Import<a class="headerlink" href="#task-2-initial-import" title="Permanent link">&para;</a></h3>
<p>Now that the files are downloaded into the <code>homework04</code> folder, you can
<strong>commit</strong> them to your <a href="https://git-scm.com/">git</a> repository:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ git add Makefile                            <span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$ git add *.py
$ git commit -m <span style="color: #BA2121">&quot;Homework 04: Initial Import&quot;</span> <span style="color: #3D7B7B; font-style: italic"># Record changes</span>
</code></pre></div>

<h3 id="task-3-unit-tests">Task 3: Unit Tests<a class="headerlink" href="#task-3-unit-tests" title="Permanent link">&para;</a></h3>
<p>After downloading these files, you can run the <code>make</code> command to run the
tests.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run all tests (will trigger automatic download)</span>
$ make
</code></pre></div>

<p>You will notice that the Makefile downloads these additional test data and scripts:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>homework04
    <span style="color: #AA5D1F; font-weight: bold">\_</span> cut.input    <span style="color: #3D7B7B; font-style: italic"># This is the input file for the cut test script</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> cut.test     <span style="color: #3D7B7B; font-style: italic"># This is the Python test for the cut utility</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> wc.input     <span style="color: #3D7B7B; font-style: italic"># This is the input file for the wc test script</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> wc.test      <span style="color: #3D7B7B; font-style: italic"># This is the Python test for the wc utility</span>
</code></pre></div>

<p>In addition to the embedded <a href="https://docs.python.org/3/library/doctest.html">doctests</a> in the <strong>skeleton code</strong>, you will be
using these <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a> to verify the correctness and behavior of your code.</p>
<div class="alert alert-info">
<h4 id="automatic-downloads"><i class="fa fa-download"></i> Automatic Downloads<a class="headerlink" href="#automatic-downloads" title="Permanent link">&para;</a></h4>
<p>The <code>test</code> scripts are automatically downloaded by the <code>Makefile</code>, so any
modifications you do to them will be lost when you run <code>make</code> again. Likewise,
because they are automatically downloaded, you do not need to <code>add</code> or <code>commit</code>
them to your <a href="https://git-scm.com/">git</a> repository.</p>
</div>
<p>The details on what you need to implement for this assignment are described
in the following sections.</p>
<div class="alert alert-success">
<h4 id="frequently-asked-questions"><i class="fa fa-question"></i> Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permanent link">&para;</a></h4>
<div class="text-center">
<iframe allowfullscreen="true" frameborder="0" height="389" mozallowfullscreen="true" src="https://docs.google.com/presentation/d/e/2PACX-1vTFZr8LskK_fC6bCmFjXoNBTl7LLhC5V2l1rlUTXgbTF4TFtx-sS4h2_n9aL8LrQEmTDpFth8xX1dy6/embed?start=false&amp;loop=false&amp;delayms=3000" webkitallowfullscreen="true" width="480"></iframe>
</div>
</div>
<h2 id="activity-1-cut-45-points">Activity 1: Cut (4.5 Points)<a class="headerlink" href="#activity-1-cut-45-points" title="Permanent link">&para;</a></h2>
<p>For the first activity, you are to re-create a simplified version of the <a href="https://man7.org/linux/man-pages/man1/cut.1.html">cut</a> filter:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Display usage message</span>
$ ./cut.py -h
Usage: cut -d DELIMITER -f FIELDS

Print selected parts of lines from stream to standard output.

    -d DELIMITER    Use DELIM instead of TAB <span style="color: #008000; font-weight: bold">for</span> field delimiter
    -f FIELDS       Select only these fields
$ <span style="color: #008000">echo</span> <span style="color: #19177C">$?</span>
<span style="color: #666666">0</span>

$ ./cut.py
Usage: cut -d DELIMITER -f FIELDS

Print selected parts of lines from stream to standard output.

    -d DELIMITER    Use DELIM instead of TAB <span style="color: #008000; font-weight: bold">for</span> field delimiter
    -f FIELDS       Select only these fields
$ <span style="color: #008000">echo</span> <span style="color: #19177C">$?</span>
<span style="color: #666666">1</span>

<span style="color: #3D7B7B; font-style: italic"># Extract the first field</span>
$ <span style="color: #008000">echo</span> <span style="color: #BA2121">&#39;Harder, Better, Faster, Stronger&#39;</span> | ./cut.py -d , -f <span style="color: #666666">1</span>
Harder

<span style="color: #3D7B7B; font-style: italic"># Extract the second and fourth fields</span>
$ <span style="color: #008000">echo</span> <span style="color: #BA2121">&#39;Harder, Better, Faster, Stronger&#39;</span> | ./cut.py -d , -f <span style="color: #666666">2</span>,4
 Better, Stronger

<span style="color: #3D7B7B; font-style: italic"># Extract the first field with test input (first four lines)</span>
$ ./cut.py -d , -f <span style="color: #666666">1</span> &lt; cut.input | head -n <span style="color: #666666">4</span>
Work it
Do it
Harder
Faster
</code></pre></div>

<p>The <code>cut.py</code> script reads input from <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin)">standard input</a> and takes the following
possible flags:</p>
<ul>
<li>
<p><code>-d</code>: This allows the user to specify a <code>DELIMITER</code>.  By default, it is the
  <code>TAB</code> character (ie. <code>\t</code>).</p>
</li>
<li>
<p><code>-f</code>: This allows the user to specify which fields to select.  The user
  <strong>must</strong> specify this flag, otherwise it should result in a usage message
  and a failure exit status as shown above.</p>
</li>
<li>
<p><code>-h</code>: This prints the usage message and exits with success.</p>
</li>
</ul>
<p>If the user specifies an unknown flag, then the program should print the
usage message and exit with a failure status.</p>
<p>As with <a href="https://man7.org/linux/man-pages/man1/cut.1.html">cut</a>, <code>cut.py</code> processes each line from <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin)">standard input</a> by
splitting the line by the <code>DELIMITER</code>, combining specified <code>FIELDS</code> by the
<code>DELIMITER</code>, and then printing out the resulting selection.</p>
<h3 id="task-1-cutpy">Task 1: <code>cut.py</code><a class="headerlink" href="#task-1-cutpy" title="Permanent link">&para;</a></h3>
<p>To build this filter, you will need to complete the <code>cut.py</code> <a href="https://www.python.org/">Python</a> script
by implementing the following functions:</p>
<ol>
<li>
<p><code>strs_to_ints(strings: list[str]) -&gt; list[int]</code></p>
<blockquote>
<p>This function converts a list of <code>strings</code> into a list of <a href="https://docs.python.org/3/library/functions.html#int">int</a>s.</p>
</blockquote>
</li>
<li>
<p><code>cut_line(line: str, delimiter: str='\t', fields: list[int]=[]) -&gt; list[str]</code></p>
<blockquote>
<p>This function splits the given <code>line</code> by the <code>delimiter</code> and returns a
<a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">list</a> containing only the specified <code>fields</code>.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hint:</strong> Consider what you want to loop over and how you can use a
<code>try/except</code> to handle <code>IndexError</code>s.</p>
</div>
</li>
<li>
<p><code>cut_stream(stream=sys.stdin, delimiter: str='\t', fields: list[int]=[]) -&gt; None</code></p>
<blockquote>
<p>This function calls <code>cut_line</code> on each line in <code>stream</code> with the
specified <code>delimiter</code> and <code>fields</code>.  It joins each result from <code>cut_line</code>
with the <code>delimiter</code> and then prints out the selection.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hint:</strong> Consider using <a href="https://docs.python.org/3/library/stdtypes.html#str.rstrip">str.rstrip</a> to remove trailing whitespace from
each line while using <a href="https://docs.python.org/3/library/stdtypes.html#str.join">str.join</a> to combine the selections extracted from
each line.</p>
</div>
</li>
<li>
<p><code>main(arguments=sys.argv[1:], stream=sys.stdin) -&gt; None</code></p>
<blockquote>
<p>This function processes the command-line <code>arguments</code> to determine the
user specified <code>DELIMITER</code> and <code>FIELDS</code> (as described above) and then
calls <code>cut_stream</code> with the given <code>stream</code> and computed <code>DELIMITER</code> and
<code>FIELDS</code>.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hint:</strong> Consider when to use <code>strs_to_ints</code> and how to check if the
user did not specify any <code>FIELDS</code>.</p>
</div>
</li>
</ol>
<h3 id="task-2-testing">Task 2: Testing<a class="headerlink" href="#task-2-testing" title="Permanent link">&para;</a></h3>
<p>As you implement <code>cut.py</code>, you can use the provided <a href="https://docs.python.org/3/library/doctest.html">doctests</a> to verify the
correctness of your code:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run doctests</span>
$ python3 -m doctest cut.py -v
...
<span style="color: #666666">2</span> items had no tests:
    cut
    cut.usage
<span style="color: #666666">4</span> items passed all tests:
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> cut.cut_line
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> cut.cut_stream
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> cut.main
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> cut.strs_to_ints
<span style="color: #666666">4</span> tests <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">6</span> items.
<span style="color: #666666">4</span> passed and <span style="color: #666666">0</span> failed.
Test passed.
</code></pre></div>

<p>You can also use <code>make</code> to run both the <a href="https://docs.python.org/3/library/doctest.html">doctests</a> and the <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run unit tests (and doctests)</span>
$ make test-cut
Testing Cut ...
test_00_doctest <span style="color: #666666">(</span>__main__.CutTest<span style="color: #666666">)</span> ... ok
test_01_mypy <span style="color: #666666">(</span>__main__.CutTest<span style="color: #666666">)</span> ... ok
test_02_strs_to_ints <span style="color: #666666">(</span>__main__.CutTest<span style="color: #666666">)</span> ... ok
test_03_cut_line <span style="color: #666666">(</span>__main__.CutTest<span style="color: #666666">)</span> ... ok
test_04_cut_stream <span style="color: #666666">(</span>__main__.CutTest<span style="color: #666666">)</span> ... ok
test_05_main_usage <span style="color: #666666">(</span>__main__.CutTest<span style="color: #666666">)</span> ... ok
test_06_main_1 <span style="color: #666666">(</span>__main__.CutTest<span style="color: #666666">)</span> ... ok
test_07_main_1_2 <span style="color: #666666">(</span>__main__.CutTest<span style="color: #666666">)</span> ... ok
test_08_main_1_2_4 <span style="color: #666666">(</span>__main__.CutTest<span style="color: #666666">)</span> ... ok

   Score <span style="color: #666666">4</span>.50 / <span style="color: #666666">4</span>.50
  Status Success

----------------------------------------------------------------------
Ran <span style="color: #666666">9</span> tests <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">0</span>.052s

OK
</code></pre></div>

<p>To just run the <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a>, you can do the following:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run unit tests</span>
$ ./cut.test -v
...
</code></pre></div>

<p>To run a specific <a href="https://en.wikipedia.org/wiki/Unit_testing">unit test</a>, you can specify the <strong>method name</strong>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run only mypy unit test</span>
$ ./cut.test -v CutTest.test_01_mypy
...
</code></pre></div>

<p>To manually check your types, you can use <a href="https://mypy-lang.org/">mypy</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run mypy to check types</span>
$ mypy cut.py
</code></pre></div>

<p>To use the test input with the script, you can utilize <a href="https://en.wikipedia.org/wiki/Redirection_(computing)">I/O redirection</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run script with input</span>
$ ./cut.py -d , -f <span style="color: #666666">1</span> &lt; cut.input
...
</code></pre></div>

<h2 id="activity-2-wc-45-points">Activity 2: WC (4.5 Points)<a class="headerlink" href="#activity-2-wc-45-points" title="Permanent link">&para;</a></h2>
<p>For the second activity, you are to re-create a simplified version of the <a href="https://man7.org/linux/man-pages/man1/wc.1.html">wc</a> utility:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Display usage message</span>
$ ./wc.py -h
Usage: wc.py <span style="color: #666666">[</span>-l | -w | -c<span style="color: #666666">]</span>

Print newline, word, and byte counts from standard input.

The options below may be used to <span style="color: #008000; font-weight: bold">select</span> which counts are printed, always <span style="color: #008000; font-weight: bold">in</span>
the following order: newline, word, byte.

    -c      Print byte counts
    -l      Print newline counts
    -w      Print word counts

<span style="color: #3D7B7B; font-style: italic"># Count newlines, words, and bytes:</span>
$ <span style="color: #008000">echo</span> Despite all my rage, I am still just a rat <span style="color: #008000; font-weight: bold">in</span> a cage | ./wc.py
<span style="color: #666666">1</span> <span style="color: #666666">13</span> <span style="color: #666666">53</span>

<span style="color: #3D7B7B; font-style: italic"># Count only newlines</span>
$ ./wc.py -l &lt; wc.input
<span style="color: #666666">18</span>
</code></pre></div>

<p>The <code>wc.py</code> script reads input from <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin)">standard input</a> and takes the following
possible flags:</p>
<ul>
<li><code>-c</code>: This allows the user to specify that the program should print <strong>byte</strong> counts.</li>
<li><code>-l</code>: This allows the user to specify that the program should print <strong>newline</strong> counts.</li>
<li><code>-w</code>: This allows the user to specify that the program should print <strong>word</strong> counts.</li>
<li><code>-h</code>: This prints the usage message and exits with success.</li>
</ul>
<p>If the user specifies an unknown flag, then the program should print the
usage message and exit with a failure status.</p>
<p>As with <a href="https://man7.org/linux/man-pages/man1/wc.1.html">wc</a>, <code>wc.py</code> computes the newline, word, and byte counts of the data
from <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin)">standard input</a> and prints out the selected counts.  If no options are
specified, then all three options are reported.</p>
<h3 id="task-1-wcpy">Task 1: <code>wc.py</code><a class="headerlink" href="#task-1-wcpy" title="Permanent link">&para;</a></h3>
<p>To build this utility, you will need to complete the <code>wc.py</code> <a href="https://www.python.org/">Python</a> script
by implementing the following functions:</p>
<ol>
<li>
<p><code>count_stream(stream=sys.stdin) -&gt; dict[str, int]</code></p>
<blockquote>
<p>This function counts the number of <strong>newlines</strong>, <strong>words</strong>, and
<strong>bytes</strong> and returns a <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">dict</a> in the form: <code>{'newlines': ..., 'words': ...,
'bytes': ...}</code>.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hint</strong>: Consider looping over the <code>stream</code> line-by-line, and consider
  how to handle possible <code>KeyError</code>s when updating the count for one of
  the options.</p>
</div>
</li>
<li>
<p><code>print_counts(counts: dict[str, int], options: list[str]) -&gt; None</code></p>
<blockquote>
<p>This function prints the <code>counts</code> of the specified <code>options</code>.  If no
<code>options</code> are specified (e.g. <code>options</code> is an empty <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">list</a>), then all
<code>options</code> are reported (ie. <code>newlines</code>, <code>words</code>, <code>bytes</code>).</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hint</strong>: Consider what you should loop over and what you should search
  to determine if an option is selected or not.  Print the selected
  options by combining them with a space (ie. <code>' '</code>) delimiter.</p>
</div>
</li>
<li>
<p><code>main(arguments=sys.argv[1:], stream=sys.stdin) -&gt; None</code></p>
<blockquote>
<p>This function processes the command-line <code>arguments</code> to determine the
user specified options, computes the counts using <code>count_stream</code> on
<code>stream</code>, and then reports the counts using <code>print_counts</code>.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hint</strong>: Consider how to keep track of the <code>options</code> while looping
  through the arguments.</p>
</div>
</li>
</ol>
<h3 id="task-2-testing_1">Task 2: Testing<a class="headerlink" href="#task-2-testing_1" title="Permanent link">&para;</a></h3>
<p>As you implement <code>wc.py</code>, you can use the provided <a href="https://docs.python.org/3/library/doctest.html">doctests</a> to verify the
correctness of your code:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run doctests</span>
$ python3 -m doctest wc.py -v
...
<span style="color: #666666">2</span> items had no tests:
    wc
    wc.usage
<span style="color: #666666">3</span> items passed all tests:
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> wc.count_stream
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> wc.main
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> wc.print_counts
<span style="color: #666666">3</span> tests <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">5</span> items.
<span style="color: #666666">3</span> passed and <span style="color: #666666">0</span> failed.
Test passed.
</code></pre></div>

<p>You can also use <code>make</code> to run both the <a href="https://docs.python.org/3/library/doctest.html">doctests</a> and the <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run unit tests (and doctests)</span>
$ make test-wc
Testing WC ...
test_00_doctest <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_01_mypy <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_02_count_stream <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_03_print_counts_all <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_04_print_counts_newlines <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_05_print_counts_words <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_06_print_counts_bytes <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_07_print_counts_newlines_words <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_08_print_counts_newlines_bytes <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_09_print_counts_words_bytes <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_10_main_usage <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_11_main_counts_all <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_12_main_counts_newlines <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_13_main_counts_words <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_14_main_counts_bytes <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_15_main_counts_newlines_words <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_16_main_counts_newlines_bytes <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok
test_17_main_counts_words_bytes <span style="color: #666666">(</span>__main__.WCTest<span style="color: #666666">)</span> ... ok

   Score <span style="color: #666666">4</span>.50 / <span style="color: #666666">4</span>.50
  Status Success

----------------------------------------------------------------------
Ran <span style="color: #666666">18</span> tests <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">0</span>.108s

OK
</code></pre></div>

<p>To just run the <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a>, you can do the following:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run unit tests</span>
$ ./wc.test -v
...
</code></pre></div>

<p>To run a specific <a href="https://en.wikipedia.org/wiki/Unit_testing">unit test</a>, you can specify the <strong>method name</strong>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run only mypy unit test</span>
$ ./wc.test -v WCTest.test_01_mypy
...
</code></pre></div>

<p>To manually check your types, you can use <a href="https://mypy-lang.org/">mypy</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run mypy to check types</span>
$ mypy wc.py
</code></pre></div>

<p>To use the test input with the script, you can utilize <a href="https://en.wikipedia.org/wiki/Redirection_(computing)">I/O redirection</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run script with input</span>
$ ./wc.py &lt; wc.input
...
</code></pre></div>

<h2 id="activity-3-quiz-2-points">Activity 3: Quiz (2 Points)<a class="headerlink" href="#activity-3-quiz-2-points" title="Permanent link">&para;</a></h2>
<p>Once you have completed all the activities above, you are to complete the
following <strong>reflection quiz</strong>:</p>
<div id="quiz-questions"></div>

<div id="quiz-responses"></div>

<script src="static/js/dredd-quiz.js"></script>
<script>
loadQuiz('static/json/homework04.json');
</script>

<pre style="display: none;" id="dr-container" class="codehilite"><code id="dredd-response"></code></pre>

<p>As with <a href="reading01.html">Reading 01</a>, you will need to store your answers in a
<code>homework04/answers.json</code> file.  You can use the form above to generate the
contents of this file, or you can write the <a href="https://json.org/">JSON</a> by hand.</p>
<p>To test your quiz, you can use the <code>check.py</code> script:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ ../.scripts/check.py
Checking homework04 quiz ...
     Q01 <span style="color: #666666">0</span>.30
     Q02 <span style="color: #666666">0</span>.70
     Q03 <span style="color: #666666">0</span>.20
     Q04 <span style="color: #666666">0</span>.60
     Q05 <span style="color: #666666">0</span>.20
   Score <span style="color: #666666">2</span>.00 / <span style="color: #666666">2</span>.00
  Status Success
</code></pre></div>

<h2 id="guru-point-1-extra-credit-point">Guru Point (1 Extra Credit Point)<a class="headerlink" href="#guru-point-1-extra-credit-point" title="Permanent link">&para;</a></h2>
<p>For extra credit, you are to modify <code>wc.py</code> such that its output matches the
exact formatting of <a href="https://man7.org/linux/man-pages/man1/wc.1.html">wc</a>.  In our <code>wc.py</code>, we simply join multiple counts by
a single space.  In the traditional <a href="https://man7.org/linux/man-pages/man1/wc.1.html">wc</a>, however, it will compute the
maximum width (ie. number of digits) of the counts and use that to organize
the counts into evenly spaced columns.</p>
<p>For example:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># wc.py (columns not aligned)</span>
$ ./wc.py &lt; wc.input
<span style="color: #666666">18</span> <span style="color: #666666">97</span> <span style="color: #666666">439</span>

<span style="color: #3D7B7B; font-style: italic"># wc (columns are aligned)</span>
$ wc &lt; wc.input
 <span style="color: #666666">18</span>  <span style="color: #666666">97</span> <span style="color: #666666">439</span>
</code></pre></div>

<p>To accomplish this task, you must do the following:</p>
<ol>
<li>
<p><code>wc2.py</code>: Copy <code>wc.py</code> to <code>wc2.py</code> and modify the <code>print_counts</code> function
  mimic the reporting behavior of <a href="https://man7.org/linux/man-pages/man1/wc.1.html">wc</a>.</p>
<div class="alert alert-success" markdown="1">
<p><strong>Hint</strong>: Once you know the maximum number of digits from the counts, you
  can use <a href="https://docs.python.org/3/library/stdtypes.html#str.rjust">str.rjust</a> to format the count to a specific width.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000">str</span>(count)<span style="color: #666666">.</span>rjust(count_width)
</code></pre></div>

<p>If only one option is specified (e.g. <code>wc -l</code>), then no adjustment
  needs to be made (ie. <code>count_width</code> should be <code>0</code>).</p>
</div>
<p>As reference, you can look at the <a href="https://github.com/coreutils/coreutils/blob/master/src/wc.c#L690">wc.c</a> source code from the <a href="https://www.gnu.org/software/coreutils/">GNU coreutils</a>.</p>
</li>
<li>
<p><code>wc2.test</code>: Copy <code>wc.test</code> to <code>wc2.test</code> and modify the appropriate
  functions to compare the output of <code>main</code> directly against the output of
  <a href="https://man7.org/linux/man-pages/man1/wc.1.html">wc</a>.</p>
<div class="alert alert-success" markdown="1">
<p><strong>Hint</strong>: You should reference how <code>cut.test</code> checks the output of <a href="https://man7.org/linux/man-pages/man1/cut.1.html">cut</a>
  in its <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a> (ie. it uses <a href="https://docs.python.org/3/library/subprocess.html#subprocess.run">subprocess.run</a> to execute <a href="https://man7.org/linux/man-pages/man1/cut.1.html">cut</a> and
  capture its output for comparison).</p>
<p>To avoid having to rename all references to <code>wc</code> to <code>wc2</code>, you can change
the <code>import</code> at the top of the new <code>wc2.test</code> to:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">wc2</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">wc</span>
</code></pre></div>

<p>You will need to adjust all the <code>print_counts_*</code> test cases in <code>wc2.test</code>
to reflect the new formatting.  Likewise, you will need to adjust the
<a href="https://docs.python.org/3/library/doctest.html">doctests</a> in <code>wc2.py</code> to reflect the alignment as well.</p>
<p>To compare the output of <code>main</code> directly against the output of <a href="https://man7.org/linux/man-pages/man1/wc.1.html">wc</a>, you
should modify each of the <code>main_*</code> test cases to replace lines such as:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000">self</span><span style="color: #666666">.</span>assertEqual(output<span style="color: #666666">.</span>getvalue(), <span style="color: #BA2121">&#39;18 97 439</span><span style="color: #AA5D1F; font-weight: bold">\n</span><span style="color: #BA2121">&#39;</span>)
</code></pre></div>

<p>With the following:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">with</span> <span style="color: #008000">open</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>Path) <span style="color: #008000; font-weight: bold">as</span> input_stream:
    process <span style="color: #666666">=</span> subprocess<span style="color: #666666">.</span>run(<span style="color: #BA2121">&#39;wc&#39;</span><span style="color: #666666">.</span>split(), stdin<span style="color: #666666">=</span>input_stream, capture_output<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
<span style="color: #008000">self</span><span style="color: #666666">.</span>assertEqual(output<span style="color: #666666">.</span>getvalue(), process<span style="color: #666666">.</span>stdout<span style="color: #666666">.</span>decode())
</code></pre></div>

<p>This will use <a href="https://docs.python.org/3/library/subprocess.html#subprocess.run">subprocess.run</a> to execute the <a href="https://man7.org/linux/man-pages/man1/wc.1.html">wc</a> command, capture its
output, and then compare it to the output of your <code>main</code> function.</p>
</div>
</li>
</ol>
<div class="alert alert-info">
<h4 id="verification"><i class="fa fa-check"></i> Verification<a class="headerlink" href="#verification" title="Permanent link">&para;</a></h4>
<p>To get credit for this Guru Point, show your new <code>wc2.py</code> and <code>wc2.test</code> to a
TA to verify (or attached a video / screenshot to your <strong>Pull Request</strong>). You
have up until a week <strong>after</strong> this assignment is due to verify your Guru
Point.</p>
</div>
<div class="alert alert-success">
<h4 id="self-service-extension"><i class="fa fa-calendar"></i> Self-Service Extension<a class="headerlink" href="#self-service-extension" title="Permanent link">&para;</a></h4>
<p>Remember that you can always <strong>forgo</strong> this Guru Point for <strong>two extra days</strong>
to do the homework.  That is, if you need an extension, you can simply skip
the Guru Point and you will automatically have until <strong>Monday</strong> to complete
the assignment for full credit.</p>
<p>Just leave a note on your <strong>Pull Request</strong> of your intentions.</p>
</div>
<h2 id="submission">Submission<a class="headerlink" href="#submission" title="Permanent link">&para;</a></h2>
<p>To submit your assignment, please commit your work to the <code>homework04</code> folder
of your <code>homework04</code> branch in your <strong>assignments</strong> <a href="https://github.com">GitHub</a> repository.
Your <tt>homework04</tt> folder should <strong>only</strong> contain the following files:</p>
<ul>
<li><tt>Makefile</tt></li>
<li><tt>answers.json</tt></li>
<li><tt>cut.py</tt></li>
<li><tt>wc.py</tt></li>
</ul>
<div class="alert alert-info">
<p><strong>Note</strong>: You do not need to commit the test scripts because the <code>Makefile</code>
automatically downloads them.</p>
</div>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">#-----------------------------------------------------------------------</span>
<span style="color: #3D7B7B; font-style: italic"># Make sure you have already completed Activity 0: Preparation</span>
<span style="color: #3D7B7B; font-style: italic">#-----------------------------------------------------------------------</span>
...
$ git add cut.py                                      <span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$ git commit -m <span style="color: #BA2121">&quot;homework04: Activity 1 completed&quot;</span>    <span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$ git add wc.py                                       <span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$ git commit -m <span style="color: #BA2121">&quot;homework04: Activity 2 completed&quot;</span>    <span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$ git add answers.json                                <span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$ git commit -m <span style="color: #BA2121">&quot;homework04: Activity 3 completed&quot;</span>    <span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$ git push -u origin homework04                       <span style="color: #3D7B7B; font-style: italic"># Push branch to GitHub</span>
</code></pre></div>

<div class="alert alert-danger">
<h4 id="pull-request"><i class="fa fa-github"></i> Pull Request<a class="headerlink" href="#pull-request" title="Permanent link">&para;</a></h4>
<p>Remember to create a <strong>Pull Request</strong> and assign the appropriate TA from the
<a href="reading05_tas.html">Reading 05 TA List</a>.</p>
<p><strong>DO NOT MERGE</strong> your own <strong>Pull Request</strong>.  The TAs use open <strong>Pull
Requests</strong> to keep track of which assignments to grade.  Closing them
yourself will cause a delay in grading and confuse the TAs.</p>
</div>


	    <div class="row">
		<hr/>

		<footer class="text-center">
		    <p class="text-muted">
		    <small>
		    Built using
		    <a href="https://getbootstrap.com/">Bootstrap</a>,
		    <a href="https://fontawesome.com/">Font Awesome</a>, and
		    <a href="http://www.python.org/">Python</a>.
		    <br/>
		    &copy; 2024 <a href="http://www.nd.edu">University of Notre Dame</a>
		    </small>
		    </p>
		</footer>
	    </div>

	</div> <!-- /container -->

	<!-- Bootstrap core JavaScript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	
	
    </body>
</html>

