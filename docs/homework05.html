<!DOCTYPE html>
<html lang="en">
    <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Homework 05: NameZ, SearX</title>

	<!-- Bootstrap core CSS -->
	<link href="static/css/blugold.css" rel="stylesheet">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

	<style>
	body {
	    padding: 10px;
	}
	</style>
    </head>
    <body>
	<div class="container">

	    <div class="row">
		<div class="page-header">
		    <ul class="nav nav-pills pull-right">
			
			<li><a href="index.html"><i class="fa fa-linux"></i> <span class="visible-md-inline visible-lg-inline">Home</span></a></li>
			
		    </ul>
		    <h1><i class="fa fa-code"></i> Homework 05: NameZ, SearX</h1>
		</div>
	    </div>

            
<p>The goal of this homework assignment is to allow you to practice using
<a href="https://www.python.org/">Python</a> to create scripts that require sophisticated parsing of data and
manipulation of <a href="https://en.wikipedia.org/wiki/Data_structure">data structures</a>. In this assignment, you will process data
in both <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> and <a href="https://json.org/">JSON</a> format and then present the information to the user
in the terminal.</p>
<p>For this assignment, record your scripts and any responses to the following
activities in the <code>homework05</code> folder of your <strong>assignments</strong> <a href="https://github.com">GitHub</a>
repository and push your work by <strong>noon Saturday, March 2</strong>.</p>
<h2 id="activity-0-preparation">Activity 0: Preparation<a class="headerlink" href="#activity-0-preparation" title="Permanent link">&para;</a></h2>
<p>Before starting this homework assignment, you should first perform a <code>git
pull</code> to retrieve any changes in your remote <a href="https://github.com">GitHub</a> repository:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ <span style="color: #008000">cd</span> path/to/repository                   <span style="color: #3D7B7B; font-style: italic"># Go to assignments repository</span>

$ git switch master                       <span style="color: #3D7B7B; font-style: italic"># Make sure we are in master branch</span>

$ git pull --rebase                       <span style="color: #3D7B7B; font-style: italic"># Get any remote changes not present locally</span>
</code></pre></div>

<p>Next, create a new branch for this assignment:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ git checkout -b homework05              <span style="color: #3D7B7B; font-style: italic"># Create homework05 branch and check it out</span>
</code></pre></div>

<h3 id="task-1-skeleton-code">Task 1: Skeleton Code<a class="headerlink" href="#task-1-skeleton-code" title="Permanent link">&para;</a></h3>
<p>To help you get started, the instructor has provided you with the following <strong>skeleton code</strong>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Go to homework05 folder</span>
$ <span style="color: #008000">cd</span> homework05

<span style="color: #3D7B7B; font-style: italic"># Download Makefile</span>
$ curl -LO https://www3.nd.edu/~pbui/teaching/cse.20289.sp24/static/txt/homework05/Makefile

<span style="color: #3D7B7B; font-style: italic"># Download Python skeleton code</span>
$ curl -LO https://www3.nd.edu/~pbui/teaching/cse.20289.sp24/static/txt/homework05/namez.py
$ curl -LO https://www3.nd.edu/~pbui/teaching/cse.20289.sp24/static/txt/homework05/searx.py
</code></pre></div>

<p>Once downloaded, you should see the following files in your <code>homework05</code> directory:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>homework05
    <span style="color: #AA5D1F; font-weight: bold">\_</span> Makefile       <span style="color: #3D7B7B; font-style: italic"># This is the Makefile building all the assignment artifacts</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> namez.py       <span style="color: #3D7B7B; font-style: italic"># This is the Python script for the namez script</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> searx.py       <span style="color: #3D7B7B; font-style: italic"># This is the Python script for the searx script</span>
</code></pre></div>

<div class="alert alert-warning">
<h4 id="doctests"><i class="fa fa-warning"></i> DocTests<a class="headerlink" href="#doctests" title="Permanent link">&para;</a></h4>
<p>You may notice that in addition to the usual comments and <code>TODOs</code>, the
<a href="https://peps.python.org/pep-0257/">docstrings</a> of each method also contains a few <a href="https://docs.python.org/3/library/doctest.html">doctests</a>.</p>
<p>You are <strong>not</strong> to modify these <a href="https://docs.python.org/3/library/doctest.html">doctests</a> and must keep them in-place. They
are used to verify the correctness of your code.</p>
<p>Your code goes <strong>below</strong> the <a href="https://peps.python.org/pep-0257/">docstrings</a>, where the <code>TODO</code> and <code>pass</code>
commands are (you may remove the pass once you complete the method).</p>
</div>
<h3 id="task-2-initial-import">Task 2: Initial Import<a class="headerlink" href="#task-2-initial-import" title="Permanent link">&para;</a></h3>
<p>Now that the files are downloaded into the <code>homework05</code> folder, you can
<strong>commit</strong> them to your <a href="https://git-scm.com/">git</a> repository:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ git add Makefile                            <span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$ git add *.py
$ git commit -m <span style="color: #BA2121">&quot;Homework 05: Initial Import&quot;</span> <span style="color: #3D7B7B; font-style: italic"># Record changes</span>
</code></pre></div>

<h3 id="task-3-unit-tests">Task 3: Unit Tests<a class="headerlink" href="#task-3-unit-tests" title="Permanent link">&para;</a></h3>
<p>After downloading these files, you can run the <code>make</code> command to run the
tests.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run all tests (will trigger automatic download)</span>
$ make
</code></pre></div>

<p>You will notice that the Makefile downloads these additional test data and scripts:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>homework05
    <span style="color: #AA5D1F; font-weight: bold">\_</span> namez.input.gz       <span style="color: #3D7B7B; font-style: italic"># This is the input file for the namez script</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> namez.input.test.gz  <span style="color: #3D7B7B; font-style: italic"># This is the test input file for the namez script</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> namez.test           <span style="color: #3D7B7B; font-style: italic"># This is the Python test for the namez script</span>
    <span style="color: #AA5D1F; font-weight: bold">\_</span> searx.test           <span style="color: #3D7B7B; font-style: italic"># This is the Python test for the searx script</span>
</code></pre></div>

<p>In addition to the embedded <a href="https://docs.python.org/3/library/doctest.html">doctests</a> in the <strong>skeleton code</strong>, you will be
using these <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a> to verify the correctness and behavior of your code.</p>
<div class="alert alert-info">
<h4 id="automatic-downloads"><i class="fa fa-download"></i> Automatic Downloads<a class="headerlink" href="#automatic-downloads" title="Permanent link">&para;</a></h4>
<p>The <code>test</code> scripts are automatically downloaded by the <code>Makefile</code>, so any
modifications you do to them will be lost when you run <code>make</code> again. Likewise,
because they are automatically downloaded, you do not need to <code>add</code> or <code>commit</code>
them to your <a href="https://git-scm.com/">git</a> repository.</p>
</div>
<p>The details on what you need to implement for this assignment are described
in the following sections.</p>
<div class="alert alert-success">
<h4 id="frequently-asked-questions"><i class="fa fa-question"></i> Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permanent link">&para;</a></h4>
<div class="text-center">
<iframe allowfullscreen="true" frameborder="0" height="389" mozallowfullscreen="true" src="https://docs.google.com/presentation/d/e/2PACX-1vT-JnqxMjo5njloCf4Sg9spbv8tc5XqjiNRWLqNqneV8cbRUR9796hsQt67vBtmbO5kI4tRVPgZ8k86/embed?start=false&amp;loop=false&amp;delayms=3000" webkitallowfullscreen="true" width="480"></iframe>
</div>
</div>
<h2 id="activity-1-namez-5-points">Activity 1: Namez (5 Points)<a class="headerlink" href="#activity-1-namez-5-points" title="Permanent link">&para;</a></h2>
<p>For the first activity, you are to write a script called <code>namez.py</code>, which
reads <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> data from the <a href="https://www.ssa.gov/">Social Security Agency</a> containing all the names
of babies born from <code>1880</code> to <code>2022</code>.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Display usage</span>
$ ./namez.py -h
Usage: namez.py <span style="color: #666666">[</span>-p -y YEARS<span style="color: #666666">]</span> NAMES

Print the counts <span style="color: #008000; font-weight: bold">for</span> each NAME <span style="color: #008000; font-weight: bold">in</span> the corresponding YEARS.

    -p          Show percentages instead of counts
    -y YEARS    Only display these YEARS <span style="color: #666666">(</span>default: all<span style="color: #666666">)</span>

YEARS may be specified multiple <span style="color: #008000">times</span> and can be a single year, or a list
separated by commas, or a range separated by -:

    -y <span style="color: #666666">2002</span> -y <span style="color: #666666">2003</span> -y <span style="color: #666666">2004</span>
    -y <span style="color: #666666">2002</span>,2003,2004
    -y <span style="color: #666666">2002</span>-2004

The YEARS are always displayed <span style="color: #008000; font-weight: bold">in</span> ascending order, <span style="color: #008000; font-weight: bold">while</span> the NAMES are
displayed <span style="color: #008000; font-weight: bold">in</span> the order provided.

<span style="color: #3D7B7B; font-style: italic"># Print counts for Peter and James in 1983</span>
$ ./namez.py -y <span style="color: #666666">1983</span> Peter James
Year       Peter       James
<span style="color: #666666">1983</span>        <span style="color: #666666">5525</span>       <span style="color: #666666">36624</span>

<span style="color: #3D7B7B; font-style: italic"># Print percentages for Peter and James from 1980 to 1985</span>
$ ./namez.py -y <span style="color: #666666">1980</span>-1985 -p Peter James
Year       Peter       James
<span style="color: #666666">1980</span>     <span style="color: #666666">0</span>.1746%     <span style="color: #666666">1</span>.1494%
<span style="color: #666666">1981</span>     <span style="color: #666666">0</span>.1744%     <span style="color: #666666">1</span>.1150%
<span style="color: #666666">1982</span>     <span style="color: #666666">0</span>.1660%     <span style="color: #666666">1</span>.1172%
<span style="color: #666666">1983</span>     <span style="color: #666666">0</span>.1595%     <span style="color: #666666">1</span>.0574%
<span style="color: #666666">1984</span>     <span style="color: #666666">0</span>.1628%     <span style="color: #666666">1</span>.0349%
<span style="color: #666666">1985</span>     <span style="color: #666666">0</span>.1597%     <span style="color: #666666">1</span>.0129%
</code></pre></div>

<p>The <code>namez.py</code> script takes the following possible flags:</p>
<ul>
<li>
<p><code>-p</code>: This has the script print out the percentage within the current year
  instead of the count for the baby name.</p>
</li>
<li>
<p><code>-y</code>: This allows the user to specify which <code>YEARS</code> to print out.  There
  are three possible formats for this flag as noted in the <strong>usage</strong> above.</p>
</li>
<li>
<p><code>-h</code>: This prints the usage message and exits with success.</p>
</li>
</ul>
<p>After the flags, the remaining arguments are the <code>NAMES</code> to include in the
table.</p>
<div class="alert alert-danger">
<p>If an unsupported flag is specified, or if no <code>NAMES</code> are given, then
<code>namez.py</code> should print out the <strong>usage</strong> message and exit with failure.</p>
</div>
<p>The baby names are stored in a <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> file, <code>namez.input.gz</code>, which is in the
following format:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>year,name,gender,count
1880,Mary,F,7065
1880,Anna,F,2604
1880,Emma,F,2003
1880,Elizabeth,F,1939
1880,Minnie,F,1746
1880,Margaret,F,1578
1880,Ida,F,1472
1880,Alice,F,1414
1880,Bertha,F,1320
...
</code></pre></div>

<p>Because the <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> file is so large, it has been compressed with <a href="https://www.gnu.org/software/gzip/">gzip</a>, which
means you will need to use <a href="https://docs.python.org/3/library/gzip.html#gzip.open">gzip.open</a> to read the file in <a href="https://www.python.org/">Python</a>.
Additionally, because the complete database is so large, it will take a few
seconds to load.  For testing purposes, the <a href="https://docs.python.org/3/library/doctest.html">doctests</a> and some of the <a href="https://en.wikipedia.org/wiki/Unit_testing">unit
tests</a> will verify the functionality of your program using
<code>names.input.test.gz</code> instead, which is a reduced version of the complete
<a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> data.</p>
<h3 id="task-1-namezpy">Task 1: <code>namez.py</code><a class="headerlink" href="#task-1-namezpy" title="Permanent link">&para;</a></h3>
<p>To implement the <code>namez.py</code> <a href="https://www.python.org/">Python</a> script, you will need to complete the
following functions:</p>
<ol>
<li>
<p><code>load_database(path: str=PATH) -&gt; Database</code></p>
<blockquote>
<p>This function reads the <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> data from the specified <code>path</code> and
returns a <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">dict</a> that maps years to a <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">dict</a> with names mapped to counts (ie.
<code>{YEAR: {NAME: COUNT}}</code>).</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hints</strong>: You can use the <a href="https://docs.python.org/3/library/csv.html#csv.DictReader">csv.DictReader</a> function with <a href="https://docs.python.org/3/library/gzip.html#gzip.open">gzip.open</a> to
  read the <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> data.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">for</span> record <span style="color: #AA22FF; font-weight: bold">in</span> csv<span style="color: #666666">.</span>DictReader(gzip<span style="color: #666666">.</span>open(path, <span style="color: #BA2121">&#39;rt&#39;</span>)):
    <span style="color: #666666">...</span>
</code></pre></div>

<p>The <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">dict</a> you return has the <em>type alias</em>, <code>Database</code>, which can be used
to annotate your <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">dict</a> variable:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>database: Database <span style="color: #666666">=</span> {}
</code></pre></div>

</div>
</li>
<li>
<p><code>print_table(database: Database, years: list[int]=[], names: list[str]=[], percentage=False) -&gt; None</code></p>
<blockquote>
<p>This function prints out a table of <code>years</code> and <code>names</code> (along with
their corresponding counts or percentages).  The first column contains
the year, while the second column contains the counts or percentages for
the first name in the corresponding year, etc.  The first row is a header
containing the word <code>year</code> and then each of the <code>names</code>.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hints</strong>: The names can be aligned into columns by using <a href="https://docs.python.org/3/library/stdtypes.html#str.rjust">str.rjust</a> with
a width of <code>12</code>.  Likewise, the counts should be aligned as follows:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #BA2121">f&#39;</span><span style="color: #A45A77; font-weight: bold">{</span>count<span style="color: #A45A77; font-weight: bold">:</span><span style="color: #BA2121">&gt;12</span><span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&#39;</span>
</code></pre></div>

<p>While percentages should be aligned as follows:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #BA2121">f&#39;</span><span style="color: #A45A77; font-weight: bold">{</span>percentage<span style="color: #A45A77; font-weight: bold">:</span><span style="color: #BA2121">&gt;11.4f</span><span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">%&#39;</span>
</code></pre></div>

<p>You should considering collecting all the columns for each row into a
<a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">list</a> and then using <a href="https://docs.python.org/3/library/stdtypes.html#str.join">str.join</a> to combine them all into a single string
for printing.
</div></p>
</li>
<li>
<p><code>main(arguments=sys.argv[1:]) -&gt; None</code></p>
<blockquote>
<p>This function processes the command line <code>arguments</code>, loads the
database, and then prints a table with specified <code>years</code> and <code>names</code>.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hints</strong>: To convert a sequence of <code>str</code>s to <code>int</code>s, you can use either
a <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions">list comprehension</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>[<span style="color: #008000">int</span>(s) <span style="color: #008000; font-weight: bold">for</span> s <span style="color: #AA22FF; font-weight: bold">in</span> strs]
</code></pre></div>

<p>Or the <a href="https://docs.python.org/3/library/functions.html#map">map</a> function:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000">list</span>(<span style="color: #008000">map</span>(<span style="color: #008000">int</span>, strs))
</code></pre></div>

<p>To add all the elements of a <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">list</a> to an existing <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">list</a>, you can use
the <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">list.extend</a> method:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>list1<span style="color: #666666">.</span>extend(list2)
</code></pre></div>

</div>
</li>
</ol>
<h3 id="task-2-testing">Task 2: Testing<a class="headerlink" href="#task-2-testing" title="Permanent link">&para;</a></h3>
<p>As you implement <code>namez.py</code>, you can use the provided <a href="https://docs.python.org/3/library/doctest.html">doctests</a> to verify the
correctness of your code:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run doctests</span>
$ python3 -m doctest namez.py -v
<span style="color: #666666">2</span> items had no tests:
    namez
    namez.usage
<span style="color: #666666">3</span> items passed all tests:
   <span style="color: #666666">4</span> tests <span style="color: #008000; font-weight: bold">in</span> namez.load_database
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> namez.main
   <span style="color: #666666">2</span> tests <span style="color: #008000; font-weight: bold">in</span> namez.print_table
<span style="color: #666666">7</span> tests <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">5</span> items.
<span style="color: #666666">7</span> passed and <span style="color: #666666">0</span> failed.
Test passed.
</code></pre></div>

<p>You can also use <code>make</code> to run both the <a href="https://docs.python.org/3/library/doctest.html">doctests</a> and the <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run unit tests (and doctests)</span>
$ make test-namez
Testing NameZ ...
test_00_doctest <span style="color: #666666">(</span>__main__.NamezTest<span style="color: #666666">)</span> ... ok
test_01_mypy <span style="color: #666666">(</span>__main__.NamezTest<span style="color: #666666">)</span> ... ok
test_02_load_database <span style="color: #666666">(</span>__main__.NamezTest<span style="color: #666666">)</span> ... ok
test_03_print_table <span style="color: #666666">(</span>__main__.NamezTest<span style="color: #666666">)</span> ... ok
test_04_main_usage <span style="color: #666666">(</span>__main__.NamezTest<span style="color: #666666">)</span> ... ok
test_05_main_year_multiple <span style="color: #666666">(</span>__main__.NamezTest<span style="color: #666666">)</span> ... ok
test_06_main_year_list <span style="color: #666666">(</span>__main__.NamezTest<span style="color: #666666">)</span> ... ok
test_07_main_year_range <span style="color: #666666">(</span>__main__.NamezTest<span style="color: #666666">)</span> ... ok
test_08_main_year_range_percentage <span style="color: #666666">(</span>__main__.NamezTest<span style="color: #666666">)</span> ... ok

   Score <span style="color: #666666">5</span>.00 / <span style="color: #666666">5</span>.00
  Status Success

----------------------------------------------------------------------
Ran <span style="color: #666666">9</span> tests <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">21</span>.071s

OK
</code></pre></div>

<p>To just run the <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a>, you can do the following:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run unit tests</span>
$ ./namez.test -v
...
</code></pre></div>

<p>To run a specific <a href="https://en.wikipedia.org/wiki/Unit_testing">unit test</a>, you can specify the <strong>method name</strong>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run only mypy unit test</span>
$ ./namez.test -v NamezTest.test_01_mypy
...
</code></pre></div>

<p>To manually check your types, you can use <a href="https://mypy-lang.org/">mypy</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run mypy to check types</span>
$ mypy namez.py
</code></pre></div>

<h2 id="activity-2-searx-5-points">Activity 2: SearX (5 Points)<a class="headerlink" href="#activity-2-searx-5-points" title="Permanent link">&para;</a></h2>
<p>For the second activity, you are to write a script called <code>searx.py</code>, which
fetches search results from <a href="https://searx.ndlug.org">searx.ndlug.org</a>, a
website running <a href="https://docs.searxng.org/">SearXNG</a>:</p>
<blockquote>
<p><a href="https://docs.searxng.org/">SearXNG</a> is a metasearch engine, aggregating the results of other search
engines while not storing information about its users.</p>
</blockquote>
<p>With this script, you can search the Internet right from your terminal!</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Display usage</span>
$ ./searx.py
Usage: searx.py <span style="color: #666666">[</span>-u URL -n LIMIT -o ORDERBY<span style="color: #666666">]</span> QUERY

Fetch SearX results <span style="color: #008000; font-weight: bold">for</span> QUERY and print them out.

    -u URL      Use URL as the SearX instance <span style="color: #666666">(</span>default is: https://searx.ndlug.org/search<span style="color: #666666">)</span>
    -n LIMIT    Only display up to LIMIT results <span style="color: #666666">(</span>default is: <span style="color: #666666">5)</span>
    -o ORDERBY  Sort the search results by ORDERBY <span style="color: #666666">(</span>default is: score<span style="color: #666666">)</span>

If ORDERBY is score, the results are shown <span style="color: #008000; font-weight: bold">in</span> descending order.  Otherwise,
results are shown <span style="color: #008000; font-weight: bold">in</span> ascending order.

<span style="color: #3D7B7B; font-style: italic"># Search for notre dame</span>
$ ./searx.py notre dame
   <span style="color: #666666">1</span>.   University of Notre Dame <span style="color: #666666">[4</span>.00<span style="color: #666666">]</span>
        https://www.nd.edu/

   <span style="color: #666666">2</span>.   Notre-Dame de Paris <span style="color: #666666">[1</span>.40<span style="color: #666666">]</span>
        https://en.wikipedia.org/wiki/Notre-Dame_de_Paris

   <span style="color: #666666">3</span>.   Notre Dame Athletics | The Fighting Irish <span style="color: #666666">[1</span>.11<span style="color: #666666">]</span>
        https://fightingirish.com/

   <span style="color: #666666">4</span>.   University of Notre Dame <span style="color: #666666">[1</span>.00<span style="color: #666666">]</span>
        https://en.wikipedia.org/wiki/University_of_Notre_Dame

   <span style="color: #666666">5</span>.   Notre Dame <span style="color: #666666">[1</span>.00<span style="color: #666666">]</span>
        https://en.wikipedia.org/wiki/Notre_Dame

<span style="color: #3D7B7B; font-style: italic"># Search for notre dame, limit to one result, order by title</span>
$ ./searx.py -n <span style="color: #666666">1</span> -o title notre dame
   <span style="color: #666666">1</span>.   <span style="color: #666666">2023</span> Notre Dame football schedule: Dates, times, TV channels, scores <span style="color: #666666">[0</span>.05<span style="color: #666666">]</span>
        https://www.ncaa.com/news/football/article/2023-12-03/2023-notre-dame-football-schedule-dates-times-tv-channels-scores
</code></pre></div>

<p>The <code>searx.py</code> script takes the following possible arguments:</p>
<ul>
<li>
<p><code>-u</code>: This allows the user to set the <code>URL</code> of the <a href="https://docs.searxng.org/">SearXNG</a> instance to
    search.  By default, this is
    <a href="https://searx.ndlug.org/search">https://searx.ndlug.org/search</a>.</p>
</li>
<li>
<p><code>-n</code>: This allows the user to limit the number of search results to print
    out.  By default, this is <code>5</code>.</p>
</li>
<li>
<p><code>-o</code>: This allows the user to specify how to sort the results.  By
    default, it will sort by <code>score</code> in descending order.  Otherwise, it will
    sort either the <code>title</code> or <code>url</code> in ascending order.</p>
</li>
<li>
<p><code>-h</code>: This prints the usage message and exits with success.</p>
</li>
</ul>
<p>After the flags, the remaining arguments is the <code>QUERY</code> to search.</p>
<div class="alert alert-danger">
<p>If an unsupported flag is specified, or if no <code>QUERY</code> is given, then
<code>searx.py</code> should print out the <strong>usage</strong> message and exit with failure.</p>
</div>
<h3 id="task-1-searxpy">Task 1: <code>searx.py</code><a class="headerlink" href="#task-1-searxpy" title="Permanent link">&para;</a></h3>
<p>To implement the <code>searx.py</code> <a href="https://www.python.org/">Python</a> script, you will need to complete the
following functions:</p>
<ol>
<li>
<p><code>searx_query(query: str, url: str=URL) -&gt; list[dict]</code></p>
<blockquote>
<p>This function makes a <a href="https://en.wikipedia.org/wiki/HTTP">HTTP</a> request to the <a href="https://docs.searxng.org/">SearXNG</a> instance
specified by <code>url</code> and returns the search results corresponding to
<code>query</code>.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hints</strong>: To fetch the results from <a href="https://docs.searxng.org/">SearXNG</a>, you will need to specify
the following <strong>parameters</strong> when making a <a href="https://en.wikipedia.org/wiki/HTTP">HTTP</a> request:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>{<span style="color: #BA2121">&#39;q&#39;</span>: query, <span style="color: #BA2121">&#39;format&#39;</span>: <span style="color: #BA2121">&#39;json&#39;</span>}
</code></pre></div>

<p>To do so, you can use <a href="https://requests.readthedocs.io/en/latest/user/quickstart/#passing-parameters-in-urls">requests.get</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>requests<span style="color: #666666">.</span>get(url, params<span style="color: #666666">=...</span>)
</code></pre></div>

<p>Remember that you want to return just the <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">list</a> of results inside the
<a href="https://json.org/">JSON</a> data, and not the whole response.</p>
</div>
</li>
<li>
<p><code>print_results(results: list[dict], limit: int=LIMIT, orderby: str=ORDERBY) -&gt; None</code></p>
<blockquote>
<p>This function prints up to <code>limit</code> search <code>results</code> sorted by
<code>orderby</code>.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hints</strong>: Each search result should be printed out in the following
format:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #BA2121">&#39;</span><span style="color: #A45A77; font-weight: bold">{index:&gt;4}</span><span style="color: #BA2121">.</span><span style="color: #AA5D1F; font-weight: bold">\t</span><span style="color: #A45A77; font-weight: bold">{title}</span><span style="color: #BA2121"> [</span><span style="color: #A45A77; font-weight: bold">{score:0.2f}</span><span style="color: #BA2121">]&#39;</span>
<span style="color: #BA2121">&#39;</span><span style="color: #AA5D1F; font-weight: bold">\t</span><span style="color: #A45A77; font-weight: bold">{url}</span><span style="color: #BA2121">&#39;</span>
</code></pre></div>

<p><strong>Note</strong>: There should be a <strong>blank line</strong> between each search result,
  but not before the first result or after the last result.</p>
<p>You should <strong>sort</strong> the results using <a href="https://docs.python.org/3/library/functions.html#sorted">sorted</a> before <strong>slicing</strong> it up
to the <code>limit</code>.  Remember that you can control how each element is compared
in <a href="https://docs.python.org/3/library/functions.html#sorted">sorted</a> by specifying a <code>key</code> function:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000">sorted</span>(results, key<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">lambda</span> r: r[<span style="color: #BA2121">&#39;score&#39;</span>], reverse<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)
</code></pre></div>

<p>The code above would return a sequence of results ordered by <code>score</code>
in <strong>descending</strong> order.</p>
</div>
</li>
<li>
<p><code>main(arguments=sys.argv[1:]) -&gt; None</code></p>
<blockquote>
<p>This function processes the command line <code>arguments</code>, fetches the
search results for <code>QUERY</code>, and then prints out the results.</p>
</blockquote>
<div class="alert alert-success" markdown="1">
<p><strong>Hints</strong>: You may wish to use <a href="https://docs.python.org/3/library/stdtypes.html#str.join">str.join</a> to combine the remaining
  arguments into a single <code>query</code>.</p>
</div>
</li>
</ol>
<h3 id="task-2-testing_1">Task 2: Testing<a class="headerlink" href="#task-2-testing_1" title="Permanent link">&para;</a></h3>
<p>As you implement <code>searx.py</code>, you can use the provided <a href="https://docs.python.org/3/library/doctest.html">doctests</a> to verify the
correctness of your code:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run doctests</span>
$ python3 -m doctest searx.py -v
...
<span style="color: #666666">2</span> items had no tests:
    searx
    searx.usage
<span style="color: #666666">3</span> items passed all tests:
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> searx.main
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> searx.print_results
   <span style="color: #666666">1</span> tests <span style="color: #008000; font-weight: bold">in</span> searx.searx_query
<span style="color: #666666">3</span> tests <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">5</span> items.
<span style="color: #666666">3</span> passed and <span style="color: #666666">0</span> failed.
Test passed.
</code></pre></div>

<p>You can also use <code>make</code> to run both the <a href="https://docs.python.org/3/library/doctest.html">doctests</a> and the <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run unit tests (and doctests)</span>
$ make test-searx
Testing SearX ...
test_00_doctest <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_01_mypy <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_02_searx_query_python <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_03_searx_query_peter_bui <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_04_searx_query_cse_20289_sp24 <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_05_searx_query_url <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_06_print_results <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_07_print_results_limit_1 <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_08_print_results_orderby_title <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_09_print_results_limit_3_orderby_url <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_10_main_usage <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_11_main_python <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_12_main_peter_bui <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_13_main_cse_20289_sp24 <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_14_main_url_python <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_15_main_limit_1_url_python <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_16_main_url_orderby_title_python <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok
test_17_main_url_orderby_url_limit_3_python <span style="color: #666666">(</span>__main__.SearxTest<span style="color: #666666">)</span> ... ok

   Score <span style="color: #666666">5</span>.00 / <span style="color: #666666">5</span>.00
  Status Success

----------------------------------------------------------------------
Ran <span style="color: #666666">18</span> tests <span style="color: #008000; font-weight: bold">in</span> <span style="color: #666666">8</span>.387s

OK
</code></pre></div>

<p>To just run the <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a>, you can do the following:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run unit tests</span>
$ ./searx.test -v
...
</code></pre></div>

<p>To run a specific <a href="https://en.wikipedia.org/wiki/Unit_testing">unit test</a>, you can specify the <strong>method name</strong>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run only mypy unit test</span>
$ ./searx.test -v SearxTest.test_01_mypy
...
</code></pre></div>

<p>To manually check your types, you can use <a href="https://mypy-lang.org/">mypy</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run mypy to check types</span>
$ mypy searx.py
</code></pre></div>

<h2 id="activity-3-quiz-1-point">Activity 3: Quiz (1 Point)<a class="headerlink" href="#activity-3-quiz-1-point" title="Permanent link">&para;</a></h2>
<p>Once you have completed all the activities above, you are to complete the
following <strong>reflection quiz</strong>:</p>
<div id="quiz-questions"></div>

<div id="quiz-responses"></div>

<script src="static/js/dredd-quiz.js"></script>
<script>
loadQuiz('static/json/homework05.json');
</script>

<pre style="display: none;" id="dr-container" class="codehilite"><code id="dredd-response"></code></pre>

<p>As with <a href="reading01.html">Reading 01</a>, you will need to store your answers in a
<code>homework05/answers.json</code> file.  You can use the form above to generate the
contents of this file, or you can write the <a href="https://json.org/">JSON</a> by hand.</p>
<p>To test your quiz, you can use the <code>check.py</code> script:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ ../.scripts/check.py
Checking homework05 quiz ...
     Q01 <span style="color: #666666">0</span>.50
     Q02 <span style="color: #666666">0</span>.50
   Score <span style="color: #666666">1</span>.00 / <span style="color: #666666">1</span>.00
  Status Success
</code></pre></div>

<h2 id="guru-point-1-extra-credit-point">Guru Point (1 Extra Credit Point)<a class="headerlink" href="#guru-point-1-extra-credit-point" title="Permanent link">&para;</a></h2>
<p>For extra credit, you are to <strong>plot the counts of multiple names</strong> from every
year using the baby names database in <code>namez.py</code>.  To do so, you should use
<a href="https://matplotlib.org/">matplotlib</a> inside a <a href="https://jupyter.org/">Jupyter</a> notebook to plot multiple lines on a single
graph as shown below:</p>
<div class="thumbnail text-center">
  <img src="static/img/homework05-namez.png" class="img-responsive">
</div>

<p>To run <a href="https://jupyter.org/">Jupyter</a> on the student machines, you can use the following command:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ jupyter-notebook-3.11 --ip studentXX.cse.nd.edu --port <span style="color: #666666">9000</span> --no-browser
</code></pre></div>

<p>Replace <code>studentXX.cse.nd.edu</code> with the name of the student machine you are
on.  Also, you may need to change the port to something else between <code>9000</code> -
<code>9999</code>.</p>
<div class="alert alert-warning">
<h4 id="google-colaboratory"><i class="fa fa-google"></i> Google Colaboratory<a class="headerlink" href="#google-colaboratory" title="Permanent link">&para;</a></h4>
<p>Alternatively, you can use <a href="https://colab.research.google.com">Google Colaboratory</a> to run a <a href="https://jupyter.org/">Jupyter</a> notebook
from your Google Drive.  This is a hassle-free way to explore developing with
<a href="https://www.python.org/">Python</a> and <a href="https://matplotlib.org/">matplotlib</a>, while using Google Cloud resources (<em>thus no need
for the VPN or the student machines</em>).</p>
</div>
<div class="alert alert-info">
<h4 id="verification"><i class="fa fa-check"></i> Verification<a class="headerlink" href="#verification" title="Permanent link">&para;</a></h4>
<p>To get credit for this Guru Point, show your <a href="https://jupyter.org/">Jupyter</a> notebook with the
graphical plot to a TA to verify (or attached a video / screenshot to your
<strong>Pull Request</strong>). You have up until a week <strong>after</strong> this assignment is due
to verify your Guru Point.</p>
</div>
<div class="alert alert-success">
<h4 id="self-service-extension"><i class="fa fa-calendar"></i> Self-Service Extension<a class="headerlink" href="#self-service-extension" title="Permanent link">&para;</a></h4>
<p>Remember that you can always <strong>forgo</strong> this Guru Point for <strong>two extra days</strong>
to do the homework.  That is, if you need an extension, you can simply skip
the Guru Point and you will automatically have until <strong>Monday</strong> to complete
the assignment for full credit.</p>
<p>Just leave a note on your <strong>Pull Request</strong> of your intentions.</p>
</div>
<h2 id="submission-11-points">Submission (11 Points)<a class="headerlink" href="#submission-11-points" title="Permanent link">&para;</a></h2>
<p>To submit your assignment, please commit your work to the <code>homework05</code> folder
of your <code>homework05</code> branch in your <strong>assignments</strong> <a href="https://github.com">GitHub</a> repository.
Your <tt>homework05</tt> folder should <strong>only</strong> contain the following files:</p>
<ul>
<li><tt>Makefile</tt></li>
<li><tt>answers.json</tt></li>
<li><tt>namez.py</tt></li>
<li><tt>searx.py</tt></li>
</ul>
<div class="alert alert-info">
<p><strong>Note</strong>: You do not need to commit the test scripts because the <code>Makefile</code>
automatically downloads them.</p>
</div>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">#-----------------------------------------------------------------------</span>
<span style="color: #3D7B7B; font-style: italic"># Make sure you have already completed Activity 0: Preparation</span>
<span style="color: #3D7B7B; font-style: italic">#-----------------------------------------------------------------------</span>
...
$ git add namez.py                                    <span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$ git commit -m <span style="color: #BA2121">&quot;Homework 05: Activity 1 completed&quot;</span>   <span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$ git add searx.py                                    <span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$ git commit -m <span style="color: #BA2121">&quot;Homework 05: Activity 2 completed&quot;</span>   <span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$ git add answers.json                                <span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$ git commit -m <span style="color: #BA2121">&quot;Homework 05: Activity 3 completed&quot;</span>   <span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$ git push -u origin homework05                       <span style="color: #3D7B7B; font-style: italic"># Push branch to GitHub</span>
</code></pre></div>

<div class="alert alert-danger">
<h4 id="pull-request"><i class="fa fa-github"></i> Pull Request<a class="headerlink" href="#pull-request" title="Permanent link">&para;</a></h4>
<p>Remember to create a <strong>Pull Request</strong> and assign the appropriate TA from the
<a href="reading06_tas.html">Reading 06 TA List</a>.</p>
<p><strong>DO NOT MERGE</strong> your own <strong>Pull Request</strong>.  The TAs use open <strong>Pull
Requests</strong> to keep track of which assignments to grade.  Closing them
yourself will cause a delay in grading and confuse the TAs.</p>
</div>


	    <div class="row">
		<hr/>

		<footer class="text-center">
		    <p class="text-muted">
		    <small>
		    Built using
		    <a href="https://getbootstrap.com/">Bootstrap</a>,
		    <a href="https://fontawesome.com/">Font Awesome</a>, and
		    <a href="http://www.python.org/">Python</a>.
		    <br/>
		    &copy; 2024 <a href="http://www.nd.edu">University of Notre Dame</a>
		    </small>
		    </p>
		</footer>
	    </div>

	</div> <!-- /container -->

	<!-- Bootstrap core JavaScript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	
	
    </body>
</html>

